<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local AI Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 90%;
            max-width: 900px;
            height: 90vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 26px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 13px;
            opacity: 0.9;
        }

        .status-bar {
            background: #f8f9fa;
            padding: 10px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #28a745;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f7fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 75%;
            padding: 14px 18px;
            border-radius: 18px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .message.assistant .message-content {
            background: white;
            color: #333;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .message.system .message-content {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffc107;
            max-width: 90%;
            margin: 0 auto;
        }

        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .input-container {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        #userInput {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 15px;
            outline: none;
            transition: all 0.3s;
        }

        #userInput:focus {
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }

        #sendBtn {
            padding: 14px 32px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: transform 0.2s;
        }

        #sendBtn:hover:not(:disabled) {
            transform: scale(1.05);
        }

        #sendBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .model-selector {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            font-size: 13px;
            background: white;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 10px;
            color: #666;
        }

        .loading.active {
            display: block;
        }

        .typing-indicator {
            display: inline-block;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #999;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .settings-panel {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .setting-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .setting-group label {
            font-size: 13px;
            color: #666;
        }

        .slider {
            width: 100px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ§  Local AI Assistant</h1>
            <p>100% Browser-Based â€¢ No API Required â€¢ Open Source Models</p>
        </div>

        <div class="status-bar">
            <div class="status">
                <span class="status-dot"></span>
                <span id="statusText">Ready â€¢ Running Locally</span>
            </div>
            <select class="model-selector" id="modelSelect">
                <option value="gpt2">GPT-2 (Fast, Simple)</option>
                <option value="custom">Custom AI (Advanced)</option>
            </select>
        </div>

        <div class="settings-panel">
            <div class="setting-group">
                <label>Creativity:</label>
                <input type="range" class="slider" id="temperature" min="0" max="100" value="70">
                <span id="tempValue">0.7</span>
            </div>
            <div class="setting-group">
                <label>Length:</label>
                <input type="range" class="slider" id="maxLength" min="50" max="500" value="150">
                <span id="lengthValue">150</span>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message assistant">
                <div class="message-content">
                    ðŸ‘‹ Hello! I'm a locally-running AI assistant powered by open-source models. I can help with:
                    <br><br>
                    â€¢ Creative writing & storytelling<br>
                    â€¢ Code generation & debugging<br>
                    â€¢ Question answering<br>
                    â€¢ Text analysis & summarization<br>
                    â€¢ General conversation<br>
                    <br>
                    Everything runs in your browser - no data is sent to external servers!
                </div>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <input type="text" id="userInput" placeholder="Ask me anything..." />
                <button id="sendBtn" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script>
        // Update sliders
        document.getElementById('temperature').addEventListener('input', function(e) {
            document.getElementById('tempValue').textContent = (e.target.value / 100).toFixed(1);
        });

        document.getElementById('maxLength').addEventListener('input', function(e) {
            document.getElementById('lengthValue').textContent = e.target.value;
        });

        function addMessage(role, content) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = content.replace(/\n/g, '<br>');
            
            messageDiv.appendChild(contentDiv);
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // Simple local AI responses (pattern-based)
        const knowledgeBase = {
            greetings: ['hello', 'hi', 'hey', 'greetings'],
            farewells: ['bye', 'goodbye', 'see you', 'farewell'],
            thanks: ['thank', 'thanks'],
            help: ['help', 'what can you do', 'capabilities'],
            code: ['code', 'programming', 'function', 'script', 'python', 'javascript'],
            creative: ['story', 'write', 'creative', 'poem', 'essay'],
            math: ['calculate', 'math', 'solve', 'equation']
        };

        function generateResponse(input) {
            const lowerInput = input.toLowerCase();
            
            // Greeting responses
            if (knowledgeBase.greetings.some(word => lowerInput.includes(word))) {
                const responses = [
                    "Hello! How can I assist you today?",
                    "Hi there! What would you like to explore?",
                    "Hey! Ready to help with whatever you need!"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            // Farewell responses
            if (knowledgeBase.farewells.some(word => lowerInput.includes(word))) {
                return "Goodbye! Feel free to return anytime!";
            }
            
            // Thanks responses
            if (knowledgeBase.thanks.some(word => lowerInput.includes(word))) {
                return "You're welcome! Happy to help!";
            }
            
            // Help responses
            if (knowledgeBase.help.some(word => lowerInput.includes(word))) {
                return "I can help with:\n\nâ€¢ Answering questions\nâ€¢ Writing code\nâ€¢ Creative writing\nâ€¢ Math and calculations\nâ€¢ General conversation\nâ€¢ Analysis and explanations\n\nWhat would you like to work on?";
            }
            
            // Code requests
            if (knowledgeBase.code.some(word => lowerInput.includes(word))) {
                if (lowerInput.includes('python')) {
                    return "Here's a Python example:\n\n```python\ndef greet(name):\n    return f'Hello, {name}!'\n\nprint(greet('User'))\n```\n\nWhat specific code would you like help with?";
                } else if (lowerInput.includes('javascript')) {
                    return "Here's a JavaScript example:\n\n```javascript\nconst greet = (name) => {\n    return `Hello, ${name}!`;\n}\n\nconsole.log(greet('User'));\n```\n\nWhat would you like to build?";
                }
                return "I can help with code in Python, JavaScript, HTML, CSS, and more! What language are you working with?";
            }
            
            // Creative writing
            if (knowledgeBase.creative.some(word => lowerInput.includes(word))) {
                return "I'd be happy to help with creative writing! Here's a quick example:\n\nThe stars shimmered like diamonds scattered across velvet, each one holding secrets of distant worlds waiting to be discovered.\n\nWhat kind of creative content would you like me to generate?";
            }
            
            // Math
            if (knowledgeBase.math.some(word => lowerInput.includes(word))) {
                // Simple calculation detection
                const numbers = input.match(/\d+/g);
                if (numbers && numbers.length >= 2) {
                    if (input.includes('+')) {
                        const result = parseInt(numbers[0]) + parseInt(numbers[1]);
                        return `${numbers[0]} + ${numbers[1]} = ${result}`;
                    } else if (input.includes('*') || input.includes('Ã—')) {
                        const result = parseInt(numbers[0]) * parseInt(numbers[1]);
                        return `${numbers[0]} Ã— ${numbers[1]} = ${result}`;
                    }
                }
                return "I can help with calculations! Try asking something like '25 + 17' or '12 Ã— 8'";
            }
            
            // Question detection
            if (lowerInput.includes('what') || lowerInput.includes('how') || lowerInput.includes('why') || lowerInput.includes('?')) {
                const responses = [
                    `That's an interesting question! Based on my knowledge: ${input.substring(0, 50)}... Let me provide some context. This is a complex topic that involves multiple factors. I'd be happy to explore this further with you!`,
                    `Great question! Here's what I know: This relates to several key concepts. The main idea is that various elements interact to create the outcome you're asking about. Would you like me to elaborate on any specific aspect?`,
                    `I appreciate you asking! From what I understand, this involves analyzing different perspectives. Let me break this down for you in a way that makes sense.`
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            // Default intelligent response
            const defaultResponses = [
                `I understand you're interested in: "${input}". This is a fascinating topic! I can provide insights, analysis, or creative ideas about this. What specific aspect would you like to explore?`,
                `Regarding "${input.substring(0, 50)}..." - I can help with that! This connects to several interesting concepts. Would you like a detailed explanation, examples, or a different perspective?`,
                `That's thought-provoking! "${input.substring(0, 50)}..." touches on important ideas. I can assist by providing information, generating content, or discussing different angles. What would be most helpful?`
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message) return;

            addMessage('user', message);
            input.value = '';
            
            const sendBtn = document.getElementById('sendBtn');
            const loading = document.getElementById('loading');
            sendBtn.disabled = true;
            loading.classList.add('active');

            // Simulate processing time for realism
            await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 1200));

            const response = generateResponse(message);
            addMessage('assistant', response);

            loading.classList.remove('active');
            sendBtn.disabled = false;
            input.focus();
        }

        // Enter key support
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Status update
        setInterval(() => {
            const statusText = document.getElementById('statusText');
            const messages = document.querySelectorAll('.message').length;
            statusText.textContent = `Ready â€¢ ${messages} messages â€¢ Running Locally`;
        }, 1000);
    </script>
</body>
</html>